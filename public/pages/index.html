<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Store</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="../css/home.css">
</head>

<body>
    <nav class="navbar"></nav>

    <!-- hero section -->
    <header class="hero-section">
        <div class="content">
            <img src="../img/light-logo.png" class="logo" alt="">
            <p class="sub-heading">best web store of all time</p>
        </div>
    </header>
     <!-- hero section -->
     <section class="product">
        <h2 class="product-category">best selling</h2>
        <button class="pre-btn"><img src="../img/arrow.png" alt=""></button>
        <button class="nxt-btn"><img src="../img/arrow.png" alt=""></button>
        <div class="product-container">
            <div class="product-card">
                <div class="product-image">
                    <span class="discount-tag">50% off</span>
                    <img src="../img/card1.png" class="product-thumb" alt="">
                    <button class="card-btn" id="card-btn1">add to card</button>
                </div>
                <div class="product-info">
                    <h2 class="product-brand" id="brand a">brand a</h2>
                    <p class="product-short-des">green drees</p>
                    <span class="price">$20</span><span class="actual-price">$40</span>
                </div>
            </div>

            <div class="product-card">
                <div class="product-image">
                    <span class="discount-tag">50% off</span>
                    <img src="../img/card2.png" class="product-thumb" alt="">
                    <button class="card-btn" id="card-btn2">add to card</button>
                </div>
                <div class="product-info">
                    <h2 class="product-brand">brand B</h2>
                    <p class="product-short-des">white jeans </p>
                    <span class="price">$20</span><span class="actual-price">$40</span>
                </div>
            </div>

            <div class="product-card">
                <div class="product-image">
                    <span class="discount-tag">50% off</span>
                    <img src="../img/card3.png" class="product-thumb" alt="">
                    <button class="card-btn"  id="card-btn3" >add to card</button>
                </div>
                <div class="product-info">
                    <h2 class="product-brand">brand C</h2>
                    <p class="product-short-des">Sport cloth</p>
                    <span class="price">$20</span><span class="actual-price">$40</span>
                </div>
            </div>

            <div class="product-card">
                <div class="product-image">
                    <span class="discount-tag">50% off</span>
                    <img src="../img/card4.png" class="product-thumb" alt="">
                    <button class="card-btn" id="card-btn4">add to card</button>
                </div>
                <div class="product-info">
                    <h2 class="product-brand">brand D</h2>
                    <p class="product-short-des">pink drees</p>
                    <span class="price">$20</span><span class="actual-price">$40</span>
                </div>
            </div>

            <div class="product-card">
                <div class="product-image">
                    <span class="discount-tag">50% off</span>
                    <img src="../img/card5.png" class="product-thumb" alt="">
                    <button class="card-btn" id="card-btn5">add to card</button>
                </div>
                <div class="product-info">
                    <h2 class="product-brand">brand E</h2>
                    <p class="product-short-des">black chinese style</p>
                    <span class="price">$20</span><span class="actual-price">$40</span>
                </div>
            </div>

            <div class="product-card">
                <div class="product-image">
                    <span class="discount-tag">50% off</span>
                    <img src="../img/card6.png" class="product-thumb" alt="">
                    <button class="card-btn" id="card-btn6">add to card</button>
                </div>
                <div class="product-info">
                    <h2 class="product-brand">brand F</h2>
                    <p class="product-short-des">black watch</p>
                    <span class="price">$20</span><span class="actual-price">$40</span>
                </div>
            </div>
            
            <div class="product-card">
                <div class="product-image">
                    <span class="discount-tag">50% off</span>
                    <img src="../img/card7.png" class="product-thumb" alt="">
                    <button class="card-btn" id="card-btn7">add to card</button>
                </div>
                <div class="product-info">
                    <h2 class="product-brand">brand G</h2>
                    <p class="product-short-des">grey pants</p>
                    <span class="price">$20</span><span class="actual-price">$40</span>
                </div>
            </div>
            <div class="product-card">
                <div class="product-image">
                    <span class="discount-tag">50% off</span>
                    <img src="../img/card8.png" class="product-thumb" alt="">
                    <button class="card-btn" id="card-btn8">add to card</button>
                </div>
                <div class="product-info">
                    <h2 class="product-brand">brand H</h2>
                    <p class="product-short-des">black shoes</p>
                    <span class="price">$20</span><span class="actual-price">$40</span>
                </div>
            </div>
            <!-- more cards -->
        </div>
    </section>

    <!-- collections -->
    <section class="collection-container">
        <a href="#" class="collection">
            <img src="../img/women-collection.png" alt="">
            <p class="collection-title">women <br> apparels</p>
        </a>
        <a href="#" class="collection">
            <img src="../img/men-collection.png" alt="">
            <p class="collection-title">men <br> apparels</p>
        </a>
        <a href="#" class="collection">
            <img src="../img/accessories-collection.png" alt="">
            <p class="collection-title">accessories</p>
        </a>
    </section>

    <!-- footer -->
    <footer></footer>


    <script src="../js/nav.js"></script>
    <script src="../js/home.js"></script>
    <script src="../js/footer.js"></script>
</body>
<script>
    let productsData = [];
    let buttons = document.querySelectorAll('.card-btn');

    buttons.forEach((button, index) => {
        button.addEventListener('click', () => {

            const isLoggedIn = checkUserLoggedIn();
            const productCard = button.closest('.product-card');
            const brand = productCard.querySelector('.product-brand').innerText;
            const shortDescription = productCard.querySelector('.product-short-des').innerText;
            const price = productCard.querySelector('.price').innerText;
            const actualPrice = productCard.querySelector('.actual-price').innerText;
            const productImage = document.querySelector('.product-thumb');

            if(isLoggedIn){
                const product = {
                    product_name: brand,
                    user_id: userData.__id,
                    user_email: userData.email,
                    product_id: index + 1,
                    product_img: productImage,
                    //shortDescription: shortDescription,
                    //price: price,
                    //actualPrice: actualPrice,
                    //img: productImage,
                };
                productsData.push(product);
                const productsJSON = JSON.stringify(productsData);
                console.log(productsJSON);
            }else{
                return res.json({ 'alert': 'Please Login in system' });
            }
            
        });
    });


    function checkUserLoggedIn() {
    const userData = sessionStorage.user;
    console.log(userData)
    return userData !== null; // Return true if user data exists, indicating user is logged in
}
</script>




